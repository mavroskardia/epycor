<dom-module id="epycor-app">
  <template>
    <style include="shared-styles">

      #contents {
        overflow-y: auto;
        height: calc(100vh - 64px);
        background-color: #f3f3f3;
      }

      paper-tabs {
        width: 100%;
      }

      app-drawer {
        z-index: 10;
      }

    </style>

    <app-header>
      <app-toolbar>
        <paper-icon-button icon="menu" onclick="drawer.toggle()"></paper-icon-button>
        <div main-title>Epycor</div>
      </app-toolbar>
    </app-header>

    <app-drawer id="drawer" swipe-open>
      <paper-menu selected="{{selected}}">
        <paper-item>Allocations</paper-item>
        <paper-item>Enter Time</paper-item>
        <paper-item>Analytics</paper-item>
      </paper-menu>
    </app-drawer>

    <div id="contents">

      <iron-pages selected="{{selected}}">

        <allocations-list
          selected-code="{{selectedcode}}"
          filtered-allocations="{{filteredAllocations}}">
        </allocations-list>

        <time-entry
          selected-code="{{selectedcode}}"
          filtered-allocations="[[filteredAllocations]]">
        </time-entry>

        <div>
          coming soon!
        </div>

      </iron-pages>

    </div>

  </template>
  <script>
    (() => {
      'use strict';

      class EpycorApp {
        get is() { return 'epycor-app' }

        get observers() {
          return [
            'selectedcodeChanged(selectedcode)',
            'selectedChanged(selected)'
          ];
        }

        get properties() {
          return {
            selected: {
              type: Number,
              value: () => 1
            }
          }
        }

        selectedChanged(s) {
          this.$.drawer.close();
        }

        selectedcodeChanged(sc) {
          console.log('selected code changed');
          this.selected = 1;
        }
      }

      Polymer(EpycorApp);

    })();
  </script>
</dom-module>